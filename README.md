# Parallel Programming Lab 2

## Overview
С помощью MPI были реализованы следующие алгоритмы умножения матриц:
- [x] По строкам
- [x] По столбцам
- [ ] По блокам

В ходе лабораторной работы, столкнулся с непониманием, 
как реализовать умножение с разбиением по блокам даже в
одно поточном режиме.

Собранные данные можно посмотреть в папке my_test - 
файлы column_data.txt и row_data.txt

## Как запустить
Я работаю на винде и пользуюсь CLion, поэтому, чтобы запустить проект с MPI,
оказалось легче запускать его в контейнере.

    docker-compose build
    docker run --rm --privileged hw/mpi:latest mpirun -n 4 --oversubscribe /app/main 128 128 128 0

## Данные
Данные о времени собирал автоматически запуская контейнер через Python и Pytest.
В файлах приведено время выполнения в зависимости от:
количества процессов, количества строк левой матрицы,
количество столбцов левой матрицы, количества столбцов правой матрицы.

## Отчет

### Статистика по строкам
Зависимость времени от количества процессов 
при размерах матриц 1024*1024. Из графика видно, что
оптимальное количество процессов для этого алгоритма
на моем компьютере - 5

![alt text](https://github.com/Dmitry-Vargin-HSE-works/ParallelProgrammingLab2/tree/master/my_test/img/by_rows/time_by_process.png)

Расчитаем ускорение и эффективность в зависимости от размеров матриц:

| Size | Time for 1 process | Time for 5 process | Acceleration | Efficiency |
|------|--------------------|--------------------|--------------|------------|
| 8    | 0.000027           | 0.000187           | 0.144385     | 0.028877   |
| 64   | 0.001606           | 0.001100           | 1.460000     | 0.292000   |
| 256  | 0.123352           | 0.056327           | 2.189927     | 0.000187   |
| 1024 | 7.170435           | 2.929540           | 2.447632     | 0.437985   |

А также в зависимости от количества процессов при размерах 1024*1024:

Время, за которое 1 процесс выполняет эти вычисления - 7.170435

| Processes | Time     | Acceleration | Efficiency |
|-----------|----------|--------------|------------|
| 1         | 7.170435 | 1.000000     | 1.000000   |
| 2         | 4.381624 | 1.636479     | 0.818239   |
| 3         | 3.516024 | 2.039359     | 0.679786   |
| 4         | 3.071078 | 2.334827     | 0.583707   |
| 5         | 2.929540 | 2.447632     | 0.489526   |
| 6         | 3.223147 | 2.224669     | 0.370778   |
| 7         | 3.027048 | 2.368788     | 0.338398   |
| 8         | 3.457495 | 2.073882     | 0.259235   |

График ускорения от количества процессов:

![alt text](https://github.com/Dmitry-Vargin-HSE-works/ParallelProgrammingLab2/tree/master/my_test/img/by_rows/acceleration_by_proc_num.png)

График эффективности от количества процессов:

![alt text](https://github.com/Dmitry-Vargin-HSE-works/ParallelProgrammingLab2/tree/master/my_test/img/by_rows/efficiency_by_proc_num.png)


### Статистика по столбцам
Зависимость времени от количества процессов
при размерах матриц 1024*1024. Из графика видно, что
оптимальное количество процессов для этого алгоритма
на моем компьютере - 5

![alt text](https://github.com/Dmitry-Vargin-HSE-works/ParallelProgrammingLab2/tree/master/my_test/img/by_rows/time_by_process.png)

Расчитаем ускорение и эффективность в зависимости от размеров матриц:

| Size | Time for 1 process | Time for 5 process | Acceleration | Efficiency |
|------|--------------------|--------------------|--------------|------------|
| 8    | 0.000027           | 0.000187           | 0.144385     | 0.028877   |
| 64   | 0.001606           | 0.001100           | 1.460000     | 0.292000   |
| 256  | 0.123352           | 0.056327           | 2.189927     | 0.000187   |
| 1024 | 7.170435           | 2.929540           | 2.447632     | 0.437985   |

А также в зависимости от количества процессов при размерах 1024*1024:

Время, за которое 1 процесс выполняет эти вычисления - 7.170435

| Processes | Time     | Acceleration | Efficiency |
|-----------|----------|--------------|------------|
| 1         | 7.170435 | 1.000000     | 1.000000   |
| 2         | 4.381624 | 1.636479     | 0.818239   |
| 3         | 3.516024 | 2.039359     | 0.679786   |
| 4         | 3.071078 | 2.334827     | 0.583707   |
| 5         | 2.929540 | 2.447632     | 0.489526   |
| 6         | 3.223147 | 2.224669     | 0.370778   |
| 7         | 3.027048 | 2.368788     | 0.338398   |
| 8         | 3.457495 | 2.073882     | 0.259235   |

График ускорения от количества процессов:

![alt text](https://github.com/Dmitry-Vargin-HSE-works/ParallelProgrammingLab2/tree/master/my_test/img/by_rows/acceleration_by_proc_num.png)

График эффективности от количества процессов:

![alt text](https://github.com/Dmitry-Vargin-HSE-works/ParallelProgrammingLab2/tree/master/my_test/img/by_rows/efficiency_by_proc_num.png)

